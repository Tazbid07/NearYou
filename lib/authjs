import { cookies } from "next/headers";

/**
 * Get currently logged-in username from cookie
 */
export function getCurrentUser() {
    const cookieStore = cookies();
    return cookieStore.get("user")?.value || null;
}

/**
 * Require authentication (used in APIs or server components)
 */
export function requireAuth() {
    const user = getCurrentUser();
    if (!user) {
        throw new Error("Unauthorized");
    }
    return user;
}
